workflows:
  build:
    name: Build Android App
    scripts:
      # Install Node.js and Cordova
      - |
        if [ ! -e "$HOME/.nvm/nvm.sh" ]; then
            curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
        fi
        source "$HOME/.nvm/nvm.sh"
        nvm install 14
        npm install -g cordova@10.0.0
      # Install the dependencies and build the app
      - |
        npm install
        ionic cordova platform add android
        npm install -g cordova-res
        cordova-res android
        ionic cordova build android --prod --release
    artifacts:
      # Define the path to the APK file
      - app/platforms/android/app/build/outputs/apk/release/app-release.ap
